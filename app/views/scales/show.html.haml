.col-md-12
  %ol.breadcrumb{itemprop: "breadcrumb"}
    %li{itemscope: true, itemtype: "http://data-vocabulary.org/Breadcrumb"}
      =link_to root_path, itemprop: "url", title: "Accueil" do
        %span{itemprop: "title"}>= "Accueil"
    %li{itemscope: true, itemtype: "http://data-vocabulary.org/Breadcrumb"}
      =link_to scales_path, itemprop: "url", title: "Gammes" do
        %span{itemprop: "title"}>= "Gammes"
    %li.active{itemscope: true, itemtype: "http://data-vocabulary.org/Breadcrumb"}
      =link_to scale_path(@scale), itemprop: "url", title: @scale.title, class: "disable" do
        %span{itemprop: "title"}>= @scale.title

%article#scale
  %header
    .page-header
      %h1= title @scale.title
    %p= description @scale.information

  %nav#modes-list
    %ul
      - @scale.modes.each do |mode|
        %li= link_to_unless mode == @mode, mode, [@key, @scale, mode]

  %nav#key-selector
    %h2 Tonalité :
    %ul
      - Key.primaries.each do |key|
        %li{:class => ("current" if @key == key)}= link_to_unless @key == key, key, [key, @scale, @mode]

  #mode
    %h2= @mode.title
    %h3= @mode.notes.join(", ")
    %p
      %label Intervales relatifs :
      = @mode.step_names.join(", ")
    %p
      %label Intervales :
      = @mode.interval_names.join(", ")

    %section#staff
      .staff.scale-staff{"data-id" => @scale.id, "data-staff" => @mode.octavized_notes.map {|n| [n]}.to_json, "data-staff-clef" => "treble", "width" => 500}

    - unless @mode.chord_scales.empty?
      %nav.related-chords
        %h3 Accords associés :
        .row.chords-list
          - @mode.chord_scales.each do |chord_scale|
            = render chord_scale.chord, :key => (@scale.key || Key.default).shifted(-1 * chord_scale.offset)

